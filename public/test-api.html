<!DOCTYPE html>
<html>
<head>
    <title>API Test</title>
</head>
<body>
    <h1>API URL Mapping Test</h1>
    <div id="results"></div>
    
    <script>
        // Test the API URL mapping
        const GOOGLE_CLOUD_BASE_URL = 'https://us-central1-marketing-saas-ai.cloudfunctions.net';
        
        const getGoogleCloudUrl = (functionName) => {
            return `${GOOGLE_CLOUD_BASE_URL}/${functionName}`;
        };
        
        const getUrl = (endpoint) => {
            const cleanEndpoint = endpoint.startsWith('/') ? endpoint.slice(1) : endpoint;
            
            const endpointMapping = {
                'dashboard/data': 'dashboard-data',
                'dashboard/quick-actions': 'dashboard-quick-actions',
                'clients/clients': 'clients-clients',
                'auth': 'auth'
            };
            
            if (endpointMapping[cleanEndpoint]) {
                return getGoogleCloudUrl(endpointMapping[cleanEndpoint]);
            }
            
            if (cleanEndpoint.startsWith('clients/clients/')) {
                return getGoogleCloudUrl('clients-clients');
            }
            
            return getGoogleCloudUrl(cleanEndpoint);
        };
        
        // Test the mapping
        const results = document.getElementById('results');
        results.innerHTML = `
            <p>dashboard/data -> ${getUrl('dashboard/data')}</p>
            <p>dashboard/quick-actions -> ${getUrl('dashboard/quick-actions')}</p>
            <p>clients/clients/org-1 -> ${getUrl('clients/clients/org-1')}</p>
            <p>auth -> ${getUrl('auth')}</p>
        `;
        
        // Test actual API calls
        async function testAPI() {
            try {
                const response = await fetch(getUrl('dashboard-data'));
                const data = await response.json();
                results.innerHTML += `<p>✅ dashboard-data API working: ${data.success}</p>`;
            } catch (error) {
                results.innerHTML += `<p>❌ dashboard-data API error: ${error.message}</p>`;
            }
        }
        
        testAPI();
    </script>
</body>
</html>
